<!DOCTYPE html>
<html>
<head>
    <title>Halibut Weight Calculator Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .calculator {
            margin: 20px 0;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 5px;
        }
        .formula {
            margin-top: 10px;
            font-size: 12px;
            color: #666;
        }
        table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #f0f0f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ£ Halibut Weight Calculator</h1>
        
        <div class="info">
            <strong>Data Source:</strong> Official Halibut Length/Weight Chart<br>
            <strong>Accuracy:</strong> Using exact lookup table from 18-100 inches<br><br>
            Features:<br>
            â€¢ Exact values for whole inch lengths (18-100 inches)<br>
            â€¢ Interpolation for fractional lengths<br>
            â€¢ Formula-based estimation for fish outside chart range<br>
            â€¢ Live weight (whole fish) measurements
        </div>
        
        <div class="calculator">
            <label for="length">Enter Halibut Length (inches):</label>
            <input type="number" id="length" placeholder="Enter length in inches" min="1" max="150">
            
            <div class="result" id="result">
                <strong>Estimated Weight:</strong> <span id="weight">--</span> lbs
                <div class="formula" id="formula"></div>
            </div>
        </div>
        
        <h3>Reference Examples (From Official Chart)</h3>
        <table>
            <thead>
                <tr>
                    <th>Length (inches)</th>
                    <th>Live Weight (lbs)</th>
                    <th>Dressed Weight (lbs)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>20</td>
                    <td>3.2</td>
                    <td>2.5</td>
                </tr>
                <tr>
                    <td>30</td>
                    <td>11.5</td>
                    <td>8.7</td>
                </tr>
                <tr>
                    <td>36</td>
                    <td>20.9</td>
                    <td>15.6</td>
                </tr>
                <tr>
                    <td>48</td>
                    <td>52.7</td>
                    <td>39.7</td>
                </tr>
                <tr>
                    <td>58</td>
                    <td>97.5</td>
                    <td>73.3</td>
                </tr>
                <tr>
                    <td>75</td>
                    <td>224.3</td>
                    <td>168.6</td>
                </tr>
                <tr>
                    <td>100</td>
                    <td>569.7</td>
                    <td>439.4</td>
                </tr>
            </tbody>
        </table>
        
        <div style="margin-top: 30px; padding: 15px; background: #fff3cd; border-radius: 5px;">
            <strong>Note:</strong> This calculator provides estimates based on average Pacific halibut proportions. 
            Actual weight can vary based on fish condition, season, and location. 
            The formula adjusts the divisor for larger fish to account for their bulkier proportions.
        </div>
    </div>
    
    <script>
        // Halibut length to live weight lookup table based on official chart
        const halibutWeightTable = [
            [18, 2.2], [20, 3.2], [22, 4.2], [24, 5.5], [25, 6.3],
            [26, 7.2], [27, 8.2], [28, 9.2], [29, 10.3], [30, 11.5],
            [31, 12.8], [32, 14.2], [33, 15.7], [34, 17.3], [35, 19.0],
            [36, 20.9], [37, 22.7], [38, 24.8], [39, 27.0], [40, 29.3],
            [41, 31.7], [42, 34.3], [43, 37.0], [44, 39.9], [45, 42.9],
            [46, 46.0], [47, 49.3], [48, 52.7], [49, 56.3], [50, 60.3],
            [51, 64.3], [52, 68.3], [53, 72.8], [54, 77.4], [55, 82.1],
            [56, 87.0], [57, 92.2], [58, 97.5], [59, 103.1], [60, 108.9],
            [61, 114.8], [62, 121.1], [63, 127.5], [64, 134.2], [65, 141.1],
            [66, 148.2], [67, 155.6], [68, 163.3], [69, 171.2], [70, 179.4],
            [71, 187.8], [72, 196.5], [73, 205.5], [74, 214.8], [75, 224.3],
            [76, 234.1], [77, 244.3], [78, 254.7], [79, 265.4], [80, 276.5],
            [81, 287.8], [82, 299.5], [83, 311.5], [84, 323.9], [85, 336.5],
            [86, 349.5], [87, 362.9], [88, 376.5], [89, 390.6], [90, 404.9],
            [91, 419.7], [92, 434.8], [93, 450.2], [94, 466.2], [95, 482.4],
            [96, 499.1], [97, 516.2], [98, 533.6], [99, 551.5], [100, 569.7]
        ];
        
        function calculateWeight() {
            const lengthInput = document.getElementById('length');
            const length = parseFloat(lengthInput.value);
            
            if (!length || length <= 0) {
                document.getElementById('weight').textContent = '--';
                document.getElementById('formula').textContent = '';
                return;
            }
            
            let weight;
            let method;
            
            // Find exact match or interpolate
            const exactMatch = halibutWeightTable.find(entry => entry[0] === Math.round(length));
            
            if (exactMatch) {
                weight = exactMatch[1];
                method = `Chart lookup for ${Math.round(length)} inches`;
            } else if (length < 18) {
                // For fish smaller than 18 inches, use cubic formula
                weight = Math.pow(length, 3) / 2600;
                method = `Formula: ${length}Â³ / 2600 (small fish extrapolation)`;
            } else if (length > 100) {
                // For fish larger than 100 inches, extrapolate
                const baseWeight = 569.7;
                const extraInches = length - 100;
                weight = baseWeight + (extraInches * 19);
                method = `Extrapolation: 569.7 + (${extraInches.toFixed(1)} Ã— 19)`;
            } else {
                // Interpolate between two nearest values
                const lowerLength = Math.floor(length);
                const upperLength = Math.ceil(length);
                
                const lowerEntry = halibutWeightTable.find(entry => entry[0] === lowerLength);
                const upperEntry = halibutWeightTable.find(entry => entry[0] === upperLength);
                
                if (lowerEntry && upperEntry) {
                    const fraction = length - lowerLength;
                    weight = lowerEntry[1] + (upperEntry[1] - lowerEntry[1]) * fraction;
                    method = `Interpolation between ${lowerLength}" (${lowerEntry[1]} lbs) and ${upperLength}" (${upperEntry[1]} lbs)`;
                } else {
                    // Fallback to cubic formula
                    let divisor = length <= 30 ? 2400 : length <= 50 ? 2200 : length <= 70 ? 2000 : 1800;
                    weight = Math.pow(length, 3) / divisor;
                    method = `Formula fallback: ${length}Â³ / ${divisor}`;
                }
            }
            
            // Display result
            document.getElementById('weight').textContent = (Math.round(weight * 10) / 10).toFixed(1);
            document.getElementById('formula').textContent = method;
        }
        
        // Add event listener
        document.getElementById('length').addEventListener('input', calculateWeight);
    </script>
</body>
</html>